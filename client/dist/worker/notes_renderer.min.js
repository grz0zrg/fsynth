self.onmessage=function(t){"use strict";var a,i,o,d,s,e,p,h,r=t.data,n=r.width,l=r.height,f=4*n,g=[],u=0,w=0,y=0,c=0,m=0,A=0;for(r.options.float?(a=new Float32Array(r.data),d=1):(a=new Uint8ClampedArray(r.data),d=1/255),a.length,r.options.flipY&&(A=-(l-1)),s=0;s<l;s+=1)for(y=0,c=0,e=0;e<n;e+=1)i=y,o=c,y=a[(m=s*f+4*e)+0],c=a[m+1],g[e]||(g[e]=[]),y>0||c>0?(p=y*d,h=c*d,u=i*d,w=o*d,g[e].push({y:s+A,pl:u,pr:w,dl:p-u,dr:h-w})):(i>0||o>0)&&(u=i*d,w=o*d,g[e].push({y:s+A,pl:u,pr:w,dl:-u,dr:-w}));postMessage({uid:r.uid,width:r.width,height:r.height,options:r.options,data:g})};