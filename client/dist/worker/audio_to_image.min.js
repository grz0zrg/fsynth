/*jslint browser: true*/
/*continue: true*/
/*global self,postMessage*/

/*
    Dedicated worker to convert audio data to image data (aka. spectrum), quite generic!
*/

/***********************************************************
    Include.
************************************************************/

// dependency
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CCWT=t():e.CCWT=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,d=[],f=!1,l=-1;function u(){f&&c&&(f=!1,c.length?d=c.concat(d):l=-1,d.length&&_())}function _(){if(!f){var e=s(u);f=!0;for(var t=d.length;t;){for(c=d,d=[];++l<t;)c&&c[l].run();l=-1,t=d.length}c=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function E(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new p(e,t)),1!==d.length||f||s(_)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=E,o.addListener=E,o.once=E,o.off=E,o.removeListener=E,o.removeAllListeners=E,o.emit=E,o.prependListener=E,o.prependOnceListener=E,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return(o?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===o(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),s=a,c=0;c<a;c++)if(o[c]!==i[c]){s=c;break}var d=[];for(c=s;c<o.length;c++)d.push("..");return(d=d.concat(i.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(0))},function(e,t,n){e.exports=n(3)},function(e,t,n){const r=n(4)(),o=r.then(e=>{const t={},n=e.cwrap("fftwf_plan_dft_r2c_1d","number",["number","number","number","number"]),r=e.cwrap("fftwf_plan_dft_1d","number",["number","number","number","number","number"]),o=e.cwrap("fftwf_execute","void",["number"]),i=e.cwrap("fftwf_destroy_plan","void",["number"]),a=e.cwrap("fftwf_free","void",["number"]),s=e.cwrap("fftwf_malloc","number",["number"]);return t.fft1d=(t,r,c)=>{const d=t.length,f=d+2*r,l=s(8*f),u=s(8*f),_=new Float32Array(e.HEAPU8.buffer,l,2*f);new Float32Array(e.HEAPU8.buffer,u,2*f);let p=0;for(p=0;p<r;++p)_[p]=_[f-p-1]=0;for(p=0;p<d;++p)_[r+p]=2*t[p]*c;for(p=f;p<2*f;++p)_[p]=0;const E=n(f,l,u,64);return o(E),i(E),a(l),a(u),new Float32Array(e.HEAPU8.buffer,u,2*f)},t.frequencyBand=(e,t,n,r,o)=>{const i=new Float32Array(2*e);o*=Math.sqrt(1/(4*Math.PI)),0==t&&(t=e/2);let a=0;for(a=0;a<e;++a){let s=t*(1-a/e)+n,c=t/e;r>0&&(s=Math.pow(r,s),c*=Math.log(r)*s),i[2*a]=s,i[2*a+1]=c*o}return i},t.numericOutput=(t,n,c,d,f,l,u)=>{const _=t.length/2,p=_-2*n,E=Math.ceil(l*(_/p));if(0===l&&(l=p),l>p)return-2;const O=s(8*E),T=s(8*E),h=new Float32Array(e.HEAPU8.buffer,O,2*E),g=new Float32Array(e.HEAPU8.buffer,T,2*E),y=r(E,O,T,1,0),w=_>>1,b=1/_,R=_/p;let D=0;for(D=d;D<f;++D){const e=c[2*D]*R,r=1/(c[2*D+1]*E*R);let i=0;for(i=0;i<E;++i){const n=w-Math.abs(Math.abs(i-e)-w);let o=t[2*i],a=t[2*i+1];const s=Math.exp(-n*n*r);o*=s*b,a*=s*b,h[2*i]=o,h[2*i+1]=a}if(E<_){const n=_%E,o=_-n;let i=0;for(i=E;i<o;i+=E){let n=0;for(n=0;n<E;++n){let o=i+n,a=2*i+2*n;const s=w-Math.abs(Math.abs(o-e)-w);let c=t[a],d=t[a+1];const f=Math.exp(-s*s*r);c*=f*b,d*=f*b;let l=h[2*n]+c,u=h[2*n+1]+d;h[2*n]=l,h[2*n+1]=u}}let a=0;for(a=0;a<n;++a){let n=o+a,i=2*o+2*a;const s=w-Math.abs(Math.abs(n-e)-w);let c=t[i],d=t[i+1];const f=Math.exp(-s*s*r);c*=f*b,d*=f*b;let l=h[2*a]+c,u=h[2*a+1]+d;h[2*a]=l,h[2*a+1]=u}}o(y),u(D,g,n*Math.round(l/p))}return i(y),a(O),a(T),0},t});e.exports=o},function(e,t,n){(function(t,r,o){var i,a=(i=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||t,function(e){var t,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_r2r_1d")||(Object.defineProperty(a.ready,"_fftwf_plan_r2r_1d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_r2r_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_r2r_1d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_r2r_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_r2r_2d")||(Object.defineProperty(a.ready,"_fftwf_plan_r2r_2d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_r2r_2d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_r2r_2d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_r2r_2d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_dft_r2c_1d")||(Object.defineProperty(a.ready,"_fftwf_plan_dft_r2c_1d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_dft_r2c_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_dft_r2c_1d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_dft_r2c_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_dft_c2r_1d")||(Object.defineProperty(a.ready,"_fftwf_plan_dft_c2r_1d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_dft_c2r_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_dft_c2r_1d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_dft_c2r_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_dft_1d")||(Object.defineProperty(a.ready,"_fftwf_plan_dft_1d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_dft_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_dft_1d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_dft_1d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_plan_dft_2d")||(Object.defineProperty(a.ready,"_fftwf_plan_dft_2d",{configurable:!0,get:function(){ge("You are getting _fftwf_plan_dft_2d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_plan_dft_2d",{configurable:!0,set:function(){ge("You are setting _fftwf_plan_dft_2d on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_free")||(Object.defineProperty(a.ready,"_fftwf_free",{configurable:!0,get:function(){ge("You are getting _fftwf_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_free",{configurable:!0,set:function(){ge("You are setting _fftwf_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_malloc")||(Object.defineProperty(a.ready,"_fftwf_malloc",{configurable:!0,get:function(){ge("You are getting _fftwf_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_malloc",{configurable:!0,set:function(){ge("You are setting _fftwf_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_execute")||(Object.defineProperty(a.ready,"_fftwf_execute",{configurable:!0,get:function(){ge("You are getting _fftwf_execute on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_execute",{configurable:!0,set:function(){ge("You are setting _fftwf_execute on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_fftwf_destroy_plan")||(Object.defineProperty(a.ready,"_fftwf_destroy_plan",{configurable:!0,get:function(){ge("You are getting _fftwf_destroy_plan on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_fftwf_destroy_plan",{configurable:!0,set:function(){ge("You are setting _fftwf_destroy_plan on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_malloc")||(Object.defineProperty(a.ready,"_malloc",{configurable:!0,get:function(){ge("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_malloc",{configurable:!0,set:function(){ge("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_free")||(Object.defineProperty(a.ready,"_free",{configurable:!0,get:function(){ge("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_free",{configurable:!0,set:function(){ge("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_stackSave")||(Object.defineProperty(a.ready,"_stackSave",{configurable:!0,get:function(){ge("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_stackSave",{configurable:!0,set:function(){ge("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_stackRestore")||(Object.defineProperty(a.ready,"_stackRestore",{configurable:!0,get:function(){ge("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_stackRestore",{configurable:!0,set:function(){ge("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_stackAlloc")||(Object.defineProperty(a.ready,"_stackAlloc",{configurable:!0,get:function(){ge("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_stackAlloc",{configurable:!0,set:function(){ge("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"___data_end")||(Object.defineProperty(a.ready,"___data_end",{configurable:!0,get:function(){ge("You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"___data_end",{configurable:!0,set:function(){ge("You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"___wasm_call_ctors")||(Object.defineProperty(a.ready,"___wasm_call_ctors",{configurable:!0,get:function(){ge("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"___wasm_call_ctors",{configurable:!0,set:function(){ge("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"___errno_location")||(Object.defineProperty(a.ready,"___errno_location",{configurable:!0,get:function(){ge("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"___errno_location",{configurable:!0,set:function(){ge("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"onRuntimeInitialized")||(Object.defineProperty(a.ready,"onRuntimeInitialized",{configurable:!0,get:function(){ge("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"onRuntimeInitialized",{configurable:!0,set:function(){ge("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var s,c={};for(s in a)a.hasOwnProperty(s)&&(c[s]=a[s]);var d=[],f=!1,l=!1,u=!1,_=!1;if(f="object"==typeof window,l="function"==typeof importScripts,u="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,_=!f&&!u&&!l,a.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var p,E,O,T,h="";function g(e){return a.locateFile?a.locateFile(e,h):h+e}if(u)h=l?n(1).dirname(h)+"/":o+"/",p=function(e,t){return O||(O=n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}())),T||(T=n(1)),e=T.normalize(e),O.readFileSync(e,t?null:"utf8")},E=function(e){var t=p(e,!0);return t.buffer||(t=new Uint8Array(t)),m(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),d=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof rt))throw e})),r.on("unhandledRejection",ge),a.inspect=function(){return"[Emscripten Module object]"};else if(_)"undefined"!=typeof read&&(p=function(e){return read(e)}),E=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(m("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?d=scriptArgs:void 0!==arguments&&(d=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);else{if(!f&&!l)throw new Error("environment detection error");l?h=self.location.href:document.currentScript&&(h=document.currentScript.src),i&&(h=i),h=0!==h.indexOf("blob:")?h.substr(0,h.lastIndexOf("/")+1):"",p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(E=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})}var y=a.print||console.log.bind(console),w=a.printErr||console.warn.bind(console);for(s in c)c.hasOwnProperty(s)&&(a[s]=c[s]);function b(e){b.shown||(b.shown={}),b.shown[e]||(b.shown[e]=1,w(e))}c=null,a.arguments&&(d=a.arguments),Object.getOwnPropertyDescriptor(a,"arguments")||Object.defineProperty(a,"arguments",{configurable:!0,get:function(){ge("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),a.thisProgram&&a.thisProgram,Object.getOwnPropertyDescriptor(a,"thisProgram")||Object.defineProperty(a,"thisProgram",{configurable:!0,get:function(){ge("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),a.quit&&a.quit,Object.getOwnPropertyDescriptor(a,"quit")||Object.defineProperty(a,"quit",{configurable:!0,get:function(){ge("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),m(void 0===a.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),m(void 0===a.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),m(void 0===a.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),m(void 0===a.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),m(void 0===a.read,"Module.read option was removed (modify read_ in JS)"),m(void 0===a.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),m(void 0===a.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),m(void 0===a.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),m(void 0===a.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(a,"read")||Object.defineProperty(a,"read",{configurable:!0,get:function(){ge("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(a,"readAsync")||Object.defineProperty(a,"readAsync",{configurable:!0,get:function(){ge("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(a,"readBinary")||Object.defineProperty(a,"readBinary",{configurable:!0,get:function(){ge("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(a,"setWindowTitle")||Object.defineProperty(a,"setWindowTitle",{configurable:!0,get:function(){ge("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var R,D,A=function(e){};a.wasmBinary&&(R=a.wasmBinary),Object.getOwnPropertyDescriptor(a,"wasmBinary")||Object.defineProperty(a,"wasmBinary",{configurable:!0,get:function(){ge("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),a.noExitRuntime&&a.noExitRuntime,Object.getOwnPropertyDescriptor(a,"noExitRuntime")||Object.defineProperty(a,"noExitRuntime",{configurable:!0,get:function(){ge("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&ge("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var M=new WebAssembly.Table({initial:828,maximum:828,element:"anyfunc"}),P=!1;function m(e,t){e||ge("Assertion failed: "+t)}function S(e){var t=a["_"+e];return m(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function j(e,t,n,r,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);x(e,t=nt(n),n)}return t},array:function(e){var t=nt(e.length);return L(e,t),t}},a=S(e),s=[],c=0;if(m("array"!==t,'Return type should not be "array".'),r)for(var d=0;d<r.length;d++){var f=i[n[d]];f?(0===c&&(c=et()),s[d]=f(r[d])):s[d]=r[d]}var l=a.apply(null,s);return l=function(e){return"string"===t?v(e):"boolean"===t?Boolean(e):e}(l),0!==c&&tt(c),l}function F(e,t,n,r){return function(){return j(e,t,n,arguments)}}var I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function U(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&I)return I.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&b("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var d=a-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function v(e,t){return e?U(k,e,t):""}function X(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>=2097152&&b("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}function x(e,t,n){return m("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),X(e,k,t,n)}function L(e,t){m(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),H.set(e,t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var N,H,k,C,Q,Y=65536;function W(e,t){return e%t>0&&(e+=t-e%t),e}function G(e){N=e,a.HEAP8=H=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=C=new Int32Array(e),a.HEAPU8=k=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=Q=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var B=5279296,Z=36416,z=5279296,V=36256;m(B%16==0,"stack must start aligned"),m(z%16==0,"heap must start aligned");var q=5242880;a.TOTAL_STACK&&m(q===a.TOTAL_STACK,"the stack size can no longer be determined at runtime");var J=a.INITIAL_MEMORY||16777216;function K(){m(0==(3&Z)),Q[1+(Z>>2)]=34821223,Q[2+(Z>>2)]=2310721022,C[0]=1668509029}function $(){var e=Q[1+(Z>>2)],t=Q[2+(Z>>2)];34821223==e&&2310721022==t||ge("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==C[0]&&ge("Runtime error: The application has corrupted its heap memory area (address zero)!")}function ee(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?a.dynCall_v(n):a.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}Object.getOwnPropertyDescriptor(a,"INITIAL_MEMORY")||Object.defineProperty(a,"INITIAL_MEMORY",{configurable:!0,get:function(){ge("Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),m(J>=q,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+J+"! (TOTAL_STACK="+q+")"),m("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(D=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:J/Y,maximum:2147483648/Y}))&&(N=D.buffer),m((J=N.byteLength)%Y==0),m(65536%Y==0),G(N),C[V>>2]=z,function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var te=[],ne=[],re=[],oe=[],ie=!1,ae=!1;function se(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)le(a.preRun.shift());ee(te)}function ce(){$(),m(!ie),ie=!0,ee(ne)}function de(){$(),ee(re)}function fe(){if($(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)ue(a.postRun.shift());ee(oe)}function le(e){te.unshift(e)}function ue(e){oe.unshift(e)}m(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var _e=0,pe=null,Ee=null,Oe={};function Te(e){_e++,a.monitorRunDependencies&&a.monitorRunDependencies(_e),e?(m(!Oe[e]),Oe[e]=1,null===pe&&"undefined"!=typeof setInterval&&(pe=setInterval((function(){if(P)return clearInterval(pe),void(pe=null);var e=!1;for(var t in Oe)e||(e=!0,w("still waiting on run dependencies:")),w("dependency: "+t);e&&w("(end of list)")}),1e4))):w("warning: run dependency added without ID")}function he(e){if(_e--,a.monitorRunDependencies&&a.monitorRunDependencies(_e),e?(m(Oe[e]),delete Oe[e]):w("warning: run dependency removed without ID"),0==_e&&(null!==pe&&(clearInterval(pe),pe=null),Ee)){var t=Ee;Ee=null,t()}}function ge(e){throw a.onAbort&&a.onAbort(e),y(e+=""),w(e),P=!0,e="abort("+e+") at "+Xe(),new WebAssembly.RuntimeError(e)}a.preloadedImages={},a.preloadedAudios={};var ye={error:function(){ge("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){ye.error()},createDataFile:function(){ye.error()},createPreloadedFile:function(){ye.error()},createLazyFile:function(){ye.error()},open:function(){ye.error()},mkdev:function(){ye.error()},registerDevice:function(){ye.error()},analyzePath:function(){ye.error()},loadFilesFromDB:function(){ye.error()},ErrnoError:function(){ye.error()}};function we(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.FS_createDataFile=ye.createDataFile,a.FS_createPreloadedFile=ye.createPreloadedFile;var be="data:application/octet-stream;base64,";function Re(e){return we(e,be)}var De="file://";function Ae(e){return we(e,De)}function Me(e,t){return function(){var n=e,r=t;return t||(r=a.asm),m(ie,"native function `"+n+"` called before runtime initialization"),m(!ae,"native function `"+n+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r[e]||m(r[e],"exported native function `"+n+"` not found"),r[e].apply(null,arguments)}}var Pe,me="FFTW.wasm";function Se(){try{if(R)return new Uint8Array(R);if(E)return E(me);throw"both async and sync fetching of the wasm failed"}catch(e){ge(e)}}function je(){return R||!f&&!l||"function"!=typeof fetch||Ae(me)?new Promise((function(e,t){e(Se())})):fetch(me,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+me+"'";return e.arrayBuffer()})).catch((function(){return Se()}))}function Fe(){var e={env:Ke,wasi_snapshot_preview1:Ke};function t(e,t){var n=e.exports;a.asm=n,he("wasm-instantiate")}Te("wasm-instantiate");var n=a;function r(e){m(a===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,t(e.instance)}function o(t){return je().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){w("failed to asynchronously prepare wasm: "+e),ge(e)}))}if(a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(R||"function"!=typeof WebAssembly.instantiateStreaming||Re(me)||Ae(me)||"function"!=typeof fetch)return o(r);fetch(me,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),o(r)}))}))}(),{}}function Ie(e){return b("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function Ue(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){var t=Ie(e);return e===t?e:t+" ["+e+"]"}))}function ve(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Xe(){var e=ve();return a.extraStackTrace&&(e+="\n"+a.extraStackTrace()),Ue(e)}function xe(){ge("stack overflow")}function Le(){ge()}Re(me)||(me=g(me)),ne.push({func:function(){$e()}}),Pe=u?function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var Ne=!0;function He(e,t){var n;return n=0===e?Date.now():1===e&&Ne()?Pe():"undefined"!=typeof performance&&performance?performance.now():Date.now(),C[t>>2]=n/1e3|0,C[t+4>>2]=n%1e3*1e3*1e3|0,0}function ke(){return 36256}function Ce(e,t,n){k.copyWithin(e,t,t+n)}function Qe(){return k.length}function Ye(e){try{return D.grow(e-N.byteLength+65535>>>16),G(D.buffer),1}catch(t){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+N.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function We(e){e>>>=0;var t=Qe();if(m(e>t),e>2147483648)return w("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math.min(2147483648,W(Math.max(16777216,e,r),65536));if(Ye(o))return!0}return w("Failed to grow the heap from "+t+" bytes to "+o+" bytes, not enough memory!"),!1}var Ge={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Ge.buffers[e];m(n),0===t||10===t?((1===e?y:w)(U(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return m(null!=Ge.varargs),Ge.varargs+=4,C[Ge.varargs-4>>2]},getStr:function(e){return v(e)},get64:function(e,t){return m(e>=0?0===t:-1===t),e}};function Be(e){return ge("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}function Ze(e,t,n,r,o){ge("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")}function ze(e,t,n,r){for(var o=0,i=0;i<n;i++){for(var a=C[t+8*i>>2],s=C[t+(8*i+4)>>2],c=0;c<s;c++)Ge.printChar(e,k[a+c]);o+=s}return C[r>>2]=o,0}function Ve(e){var t=Date.now();return C[e>>2]=t/1e3|0,C[e+4>>2]=t%1e3*1e3|0,0}function qe(e){A(0|e)}var Je,Ke={__handle_stack_overflow:xe,abort:Le,clock_gettime:He,emscripten_get_sbrk_ptr:ke,emscripten_memcpy_big:Ce,emscripten_resize_heap:We,fd_close:Be,fd_seek:Ze,fd_write:ze,gettimeofday:Ve,memory:D,setTempRet0:qe,table:M},$e=(Fe(),a.___wasm_call_ctors=Me("__wasm_call_ctors")),et=(a._fftwf_destroy_plan=Me("fftwf_destroy_plan"),a._fftwf_execute=Me("fftwf_execute"),a._fftwf_malloc=Me("fftwf_malloc"),a._fftwf_free=Me("fftwf_free"),a._fftwf_plan_dft_1d=Me("fftwf_plan_dft_1d"),a._fftwf_plan_dft_2d=Me("fftwf_plan_dft_2d"),a._fftwf_plan_dft_c2r_1d=Me("fftwf_plan_dft_c2r_1d"),a._fftwf_plan_dft_r2c_1d=Me("fftwf_plan_dft_r2c_1d"),a._fftwf_plan_r2r_1d=Me("fftwf_plan_r2r_1d"),a._fftwf_plan_r2r_2d=Me("fftwf_plan_r2r_2d"),a.___errno_location=Me("__errno_location"),a.stackSave=Me("stackSave")),tt=a.stackRestore=Me("stackRestore"),nt=a.stackAlloc=Me("stackAlloc");function rt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ot(e){function n(){Je||(Je=!0,a.calledRun=!0,P||(ce(),de(),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),m(!a._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),fe()))}e=e||d,_e>0||(K(),se(),_e>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n(),$()))}if(a._malloc=Me("malloc"),a._free=Me("free"),a.___set_stack_limit=Me("__set_stack_limit"),a.__growWasmMemory=Me("__growWasmMemory"),a.dynCall_ii=Me("dynCall_ii"),a.dynCall_iiii=Me("dynCall_iiii"),a.dynCall_jiji=Me("dynCall_jiji"),a.dynCall_iii=Me("dynCall_iii"),a.dynCall_vii=Me("dynCall_vii"),a.dynCall_vi=Me("dynCall_vi"),a.dynCall_viiiii=Me("dynCall_viiiii"),a.dynCall_iiiiiiiiiiii=Me("dynCall_iiiiiiiiiiii"),a.dynCall_viiiiiiiii=Me("dynCall_viiiiiiiii"),a.dynCall_viiffi=Me("dynCall_viiffi"),a.dynCall_viii=Me("dynCall_viii"),a.dynCall_iiiiiiiiiiiiiii=Me("dynCall_iiiiiiiiiiiiiii"),a.dynCall_iiiiiiiiiii=Me("dynCall_iiiiiiiiiii"),a.dynCall_viiiiiii=Me("dynCall_viiiiiii"),a.dynCall_viiiiiiii=Me("dynCall_viiiiiiii"),a.dynCall_viiiiiiiiii=Me("dynCall_viiiiiiiiii"),a.dynCall_iiiiiiiiii=Me("dynCall_iiiiiiiiii"),a.dynCall_iiiiiii=Me("dynCall_iiiiiii"),Object.getOwnPropertyDescriptor(a,"intArrayFromString")||(a.intArrayFromString=function(){ge("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"intArrayToString")||(a.intArrayToString=function(){ge("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),a.ccall=j,a.cwrap=F,Object.getOwnPropertyDescriptor(a,"setValue")||(a.setValue=function(){ge("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getValue")||(a.getValue=function(){ge("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"allocate")||(a.allocate=function(){ge("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getMemory")||(a.getMemory=function(){ge("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"UTF8ArrayToString")||(a.UTF8ArrayToString=function(){ge("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"UTF8ToString")||(a.UTF8ToString=function(){ge("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToUTF8Array")||(a.stringToUTF8Array=function(){ge("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToUTF8")||(a.stringToUTF8=function(){ge("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"lengthBytesUTF8")||(a.lengthBytesUTF8=function(){ge("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stackTrace")||(a.stackTrace=function(){ge("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addOnPreRun")||(a.addOnPreRun=function(){ge("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addOnInit")||(a.addOnInit=function(){ge("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addOnPreMain")||(a.addOnPreMain=function(){ge("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addOnExit")||(a.addOnExit=function(){ge("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addOnPostRun")||(a.addOnPostRun=function(){ge("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeStringToMemory")||(a.writeStringToMemory=function(){ge("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeArrayToMemory")||(a.writeArrayToMemory=function(){ge("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeAsciiToMemory")||(a.writeAsciiToMemory=function(){ge("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addRunDependency")||(a.addRunDependency=function(){ge("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"removeRunDependency")||(a.removeRunDependency=function(){ge("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createFolder")||(a.FS_createFolder=function(){ge("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createPath")||(a.FS_createPath=function(){ge("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createDataFile")||(a.FS_createDataFile=function(){ge("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createPreloadedFile")||(a.FS_createPreloadedFile=function(){ge("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createLazyFile")||(a.FS_createLazyFile=function(){ge("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createLink")||(a.FS_createLink=function(){ge("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_createDevice")||(a.FS_createDevice=function(){ge("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"FS_unlink")||(a.FS_unlink=function(){ge("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(a,"dynamicAlloc")||(a.dynamicAlloc=function(){ge("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"loadDynamicLibrary")||(a.loadDynamicLibrary=function(){ge("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"loadWebAssemblyModule")||(a.loadWebAssemblyModule=function(){ge("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getLEB")||(a.getLEB=function(){ge("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getFunctionTables")||(a.getFunctionTables=function(){ge("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"alignFunctionTables")||(a.alignFunctionTables=function(){ge("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"registerFunctions")||(a.registerFunctions=function(){ge("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"addFunction")||(a.addFunction=function(){ge("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"removeFunction")||(a.removeFunction=function(){ge("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getFuncWrapper")||(a.getFuncWrapper=function(){ge("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"prettyPrint")||(a.prettyPrint=function(){ge("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"makeBigInt")||(a.makeBigInt=function(){ge("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"dynCall")||(a.dynCall=function(){ge("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getCompilerSetting")||(a.getCompilerSetting=function(){ge("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"print")||(a.print=function(){ge("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"printErr")||(a.printErr=function(){ge("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getTempRet0")||(a.getTempRet0=function(){ge("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"setTempRet0")||(a.setTempRet0=function(){ge("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"callMain")||(a.callMain=function(){ge("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"abort")||(a.abort=function(){ge("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToNewUTF8")||(a.stringToNewUTF8=function(){ge("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"emscripten_realloc_buffer")||(a.emscripten_realloc_buffer=function(){ge("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"ENV")||(a.ENV=function(){ge("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"ERRNO_CODES")||(a.ERRNO_CODES=function(){ge("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"ERRNO_MESSAGES")||(a.ERRNO_MESSAGES=function(){ge("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"setErrNo")||(a.setErrNo=function(){ge("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"DNS")||(a.DNS=function(){ge("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GAI_ERRNO_MESSAGES")||(a.GAI_ERRNO_MESSAGES=function(){ge("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"Protocols")||(a.Protocols=function(){ge("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"Sockets")||(a.Sockets=function(){ge("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"UNWIND_CACHE")||(a.UNWIND_CACHE=function(){ge("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"readAsmConstArgs")||(a.readAsmConstArgs=function(){ge("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"jstoi_q")||(a.jstoi_q=function(){ge("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"jstoi_s")||(a.jstoi_s=function(){ge("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"abortStackOverflow")||(a.abortStackOverflow=function(){ge("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"reallyNegative")||(a.reallyNegative=function(){ge("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"formatString")||(a.formatString=function(){ge("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"PATH")||(a.PATH=function(){ge("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"PATH_FS")||(a.PATH_FS=function(){ge("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SYSCALLS")||(a.SYSCALLS=function(){ge("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"syscallMmap2")||(a.syscallMmap2=function(){ge("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"syscallMunmap")||(a.syscallMunmap=function(){ge("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"flush_NO_FILESYSTEM")||(a.flush_NO_FILESYSTEM=function(){ge("'flush_NO_FILESYSTEM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"JSEvents")||(a.JSEvents=function(){ge("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"specialHTMLTargets")||(a.specialHTMLTargets=function(){ge("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"demangle")||(a.demangle=function(){ge("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"demangleAll")||(a.demangleAll=function(){ge("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"jsStackTrace")||(a.jsStackTrace=function(){ge("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stackTrace")||(a.stackTrace=function(){ge("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"getEnvStrings")||(a.getEnvStrings=function(){ge("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"checkWasiClock")||(a.checkWasiClock=function(){ge("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeI53ToI64")||(a.writeI53ToI64=function(){ge("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeI53ToI64Clamped")||(a.writeI53ToI64Clamped=function(){ge("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeI53ToI64Signaling")||(a.writeI53ToI64Signaling=function(){ge("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeI53ToU64Clamped")||(a.writeI53ToU64Clamped=function(){ge("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"writeI53ToU64Signaling")||(a.writeI53ToU64Signaling=function(){ge("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"readI53FromI64")||(a.readI53FromI64=function(){ge("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"readI53FromU64")||(a.readI53FromU64=function(){ge("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"convertI32PairToI53")||(a.convertI32PairToI53=function(){ge("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"convertU32PairToI53")||(a.convertU32PairToI53=function(){ge("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"Browser")||(a.Browser=function(){ge("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GL")||(a.GL=function(){ge("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"emscriptenWebGLGet")||(a.emscriptenWebGLGet=function(){ge("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"emscriptenWebGLGetTexPixelData")||(a.emscriptenWebGLGetTexPixelData=function(){ge("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"emscriptenWebGLGetUniform")||(a.emscriptenWebGLGetUniform=function(){ge("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"emscriptenWebGLGetVertexAttrib")||(a.emscriptenWebGLGetVertexAttrib=function(){ge("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"AL")||(a.AL=function(){ge("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SDL_unicode")||(a.SDL_unicode=function(){ge("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SDL_ttfContext")||(a.SDL_ttfContext=function(){ge("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SDL_audio")||(a.SDL_audio=function(){ge("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SDL")||(a.SDL=function(){ge("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"SDL_gfx")||(a.SDL_gfx=function(){ge("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GLUT")||(a.GLUT=function(){ge("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"EGL")||(a.EGL=function(){ge("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GLFW_Window")||(a.GLFW_Window=function(){ge("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GLFW")||(a.GLFW=function(){ge("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"GLEW")||(a.GLEW=function(){ge("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"IDBStore")||(a.IDBStore=function(){ge("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"runAndAbortIfError")||(a.runAndAbortIfError=function(){ge("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"warnOnce")||(a.warnOnce=function(){ge("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stackSave")||(a.stackSave=function(){ge("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stackRestore")||(a.stackRestore=function(){ge("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stackAlloc")||(a.stackAlloc=function(){ge("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"AsciiToString")||(a.AsciiToString=function(){ge("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToAscii")||(a.stringToAscii=function(){ge("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"UTF16ToString")||(a.UTF16ToString=function(){ge("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToUTF16")||(a.stringToUTF16=function(){ge("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"lengthBytesUTF16")||(a.lengthBytesUTF16=function(){ge("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"UTF32ToString")||(a.UTF32ToString=function(){ge("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"stringToUTF32")||(a.stringToUTF32=function(){ge("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"lengthBytesUTF32")||(a.lengthBytesUTF32=function(){ge("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"allocateUTF8")||(a.allocateUTF8=function(){ge("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(a,"allocateUTF8OnStack")||(a.allocateUTF8OnStack=function(){ge("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),a.writeStackCookie=K,a.checkStackCookie=$,Object.getOwnPropertyDescriptor(a,"ALLOC_NORMAL")||Object.defineProperty(a,"ALLOC_NORMAL",{configurable:!0,get:function(){ge("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(a,"ALLOC_STACK")||Object.defineProperty(a,"ALLOC_STACK",{configurable:!0,get:function(){ge("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(a,"ALLOC_DYNAMIC")||Object.defineProperty(a,"ALLOC_DYNAMIC",{configurable:!0,get:function(){ge("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(a,"ALLOC_NONE")||Object.defineProperty(a,"ALLOC_NONE",{configurable:!0,get:function(){ge("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Ee=function e(){Je||ot(),Je||(Ee=e)},a.run=ot,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ot(),e.ready});e.exports=a}).call(this,"/index.js",n(0),"/")}])}));
/***********************************************************
    Fields.
************************************************************/

var _progress = 0,
    _prev_progress = 0,
    _stereo = false;

/***********************************************************
    Functions.
************************************************************/

var _convert = function (ccwt_lib, params, data) {
    var length_in_seconds = data.length / params.sample_rate,
    
        height = params.settings.height,

        minimum_frequency = params.settings.minfreq * length_in_seconds,
        maximum_frequency = params.settings.maxfreq * length_in_seconds,
    
        deviation = params.settings.deviation,

        phase_import = params.settings.phase_import,

        // linear
        frequency_basis_linear = 0,
        frequency_range_linear = maximum_frequency - minimum_frequency,
        frequency_offset_linear = minimum_frequency,

        // logarithmic
        frequency_basis_log = 2.0, // each octave double the frequency
        minimum_octave = Math.log(minimum_frequency) / Math.log(frequency_basis_log),
        maximum_octave = Math.log(maximum_frequency) / Math.log(frequency_basis_log),

        frequency_range_log = maximum_octave - minimum_octave,
        frequency_offset_log = minimum_octave,

        frequencies = null,

        padding = params.settings.padding,

        gain_factor = params.settings.gain,
        fourier_transformed_signal,

        pixels_per_second = params.settings.pps,

        progress_step = 1 / height * 100,

        output_width,

        row_callback,
        
        image_data;

    if (_stereo) {
        progress_step /= 2;
    }

    if (params.settings.mapping === "linear") {
        // linear
        frequencies = ccwt_lib.frequencyBand(height, frequency_range_linear, frequency_offset_linear, frequency_basis_linear, deviation);
    } else {
        // logarithmic
        frequencies = ccwt_lib.frequencyBand(height, frequency_range_log, frequency_offset_log, frequency_basis_log, deviation);
    }

    // add some padding to avoid start / end oddities (when there is data at one/both end of the signal)
    fourier_transformed_signal = ccwt_lib.fft1d(data, padding, gain_factor);

    output_width = Math.floor(length_in_seconds * pixels_per_second);

    image_data = new Uint8ClampedArray(output_width * height * 4);

    row_callback = function (y, row_data, output_padding) {
        _prev_progress = parseInt(_progress, 10);
        _progress += progress_step;

        var roundedProgress = parseInt(_progress, 10);
        
        if (roundedProgress != _prev_progress) {
            if (roundedProgress % 5 === 0) {
                postMessage(roundedProgress);
            }
        }
        
        var x = 0
        for (x = 0; x < output_width; ++x) {
            var r = row_data[output_padding * 2 + x * 2];
            var i = row_data[output_padding * 2 + x * 2 + 1];

            var amplitude_raw = Math.hypot(r, i);

            // linear intensity
            var value_sign = (0 < amplitude_raw) - (amplitude_raw < 0);
            var amplitude = Math.min(amplitude_raw * value_sign, 1.0) * value_sign;
            
            var color = Math.round(amplitude * 255);

            var index = y * output_width * 4 + x * 4;
            image_data[index] = color;
            image_data[index + 1] = color;
            image_data[index + 2] = color;
            image_data[index + 3] = 255;

            if (phase_import) {
                var phase = Math.atan2(r, i);
                var phase_color = Math.round(phase * 255);

                image_data[index + 2] = phase_color;
            }
        }
    };

    ccwt_lib.numericOutput(fourier_transformed_signal, padding, frequencies, 0, frequencies.length / 2, output_width, row_callback);

    var i, n, amax = 0, amin = 255, adiff;

    // mag. normalization
    for (i = 0; i < image_data.length; i += 4) {
        n = image_data[i];
        amax = n > amax ? n : amax;
        amin = n < amin ? n : amin;
    }

    adiff = 255 / (amax - amin);

    for (i = 0; i < image_data.length; i += 4) {
        image_data[i] -= amin;
        image_data[i + 1] -= amin;
        
        image_data[i] *= adiff;
        image_data[i + 1] *= adiff;
        
        if (!phase_import) {
            image_data[i + 2] -= amin;
            image_data[i + 2] *= adiff;
        }
    }
   
    return { width: output_width, height: height, data: image_data };
};

// when in stereo, we basically assign R = L, G = R and B = phase OR B = (L+R) / 2
var _mergeChannels = function (l, r, phase_import) {
    var i = 0;
    
    for (i = 0; i < l.length; i += 4) {
        l[i + 1] = r[i];
        if (phase_import) {
            l[i + 2] = r[i + 2];
        } else {
            l[i + 2] = (l[i] + r[i]) / 2;
        } 
    }
    
    return l;
};

self.onmessage = function (m) {
    "use strict";

    var data = m.data,

        l = new Float32Array(data.left),
        r = null,
        
        ll = null,
        rr = null,
        
        result = {
            pbuffer: null,
            width: null,
            height: null
        };
    
    _progress = 0;
    
    _stereo = (data.right !== null);
    
    CCWT.then(function (ccwt_lib) {
        ll = _convert(ccwt_lib, data, l);

        if (data.right) {
            r = new Float32Array(data.right);
            rr = _convert(ccwt_lib, data, r);
            
            result.pbuffer = _mergeChannels(ll.data, rr.data, data.settings.phase_import).buffer;
        } else {
            result.pbuffer = ll.data.buffer;
        }

        result.width = ll.width;
        result.height = ll.height;
        
        postMessage(result, [result.pbuffer]);
    });
};
